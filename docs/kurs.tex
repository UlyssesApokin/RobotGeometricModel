% Сopyright (C)  2023 Ulysses Apokin (Jelisej Apokin)
%
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.3
% or any later version published by the Free Software Foundation;
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
% A copy of the license is included in the section entitled "GNU
% Free Documentation License".

% класс документа extarticle, односторонняя печать,
% чистовая версия, 14-й кегль шрифта
\documentclass[oneside, final, 14pt]{extarticle}

% кодировка документа utf-8
\usepackage[utf8]{inputenc}
% шрифт русского текста
\usepackage[T2A]{fontenc}
% языки документа -- русский и английский
\usepackage[english, russian]{babel}
% преамбула настройка полей докумета и колонтитулов
\usepackage{vmargin}
% формат листа А4
\setpapersize{A4}
% отступ левого поля,
%	верхнего поля,
%	правого поля,
%	нижнего поля,
% высота верхнего колонитула,
% отступ верхнего колонтитула от верхнего края текста,
% высота нижнего колонтитула,
% отступ ниж.кол. от нижнего края текста (нужен для номера стр.).
\setmarginsrb{26mm}{10mm}{8mm}{8mm}{0pt}{0mm}{0mm}{17mm}
% красная строка для первого абзаца 
\usepackage{indentfirst}
% перенос строк, если они залезают на поля
\sloppy
% преамбула для работы с графикой в документе
\usepackage{graphicx}
% преамбула для удобной работы с математическими формулами
\usepackage{amsmath}
% преамбула для удобной работы с листингами программ
\usepackage{moreverb}
% размер табуляции в листинге 4 символа
\def\verbatimtabsize{4\relax}

% преамбула для редактирования заголовков
\usepackage{titlesec}

% заголовки секций посередине с точкой на конце
\titleformat{\section}{\filcenter\normalfont\Large\bfseries}{\thesection.}{0.6em}{}
% подзаголовки с точкой на конце
\titleformat{\subsection}{\filright\normalfont\large\bfseries}{\thesubsection.}{0.4em}{}

% номер страницы выровнен по правому краю
\makeatletter
\renewcommand*{\ps@plain}{%
  \let\@mkboth\@gobbletwo
  \let\@oddhead\@empty
  \def\@oddfoot{%
    \reset@font
    \hfil
    \thepage
    % \hfil % removed for aligning to the right
  }%
  \let\@evenhead\@empty
  \let\@evenfoot\@oddfoot
}
\makeatother
\pagestyle{plain}

% начало документа
\begin{document}

\begin{titlepage}
  \centerline{МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ РФ}
  \medskip
  \centerline{ФГБОУ ВО "<Брянский государственный технический университет">}
  \vfill
  \centerline{Кафедра "<Автоматизированные технологические системы">}
  \vfill
  \vfill
  \centerline{Компьютерное моделирование мехатронных систем}
  \vfill
  \centerline{Курсовая работа по теме:}
  \medskip
  \centerline{"<Разработать математическую модель трехзвенного робота-манипулятора">}
  \vfill
  \null \hfill
  \begin{minipage}{0.52\textwidth}
    Выполнил студент гр.\,О-20-МиР-мхт-Б:
	\par
	\medskip
	Апокин~Е.\,М.\,
	\rule{5.5cm}{0.25pt}
	\par
	\medskip
	"<\rule{1.25cm}{0.25pt}\,">\rule{5cm}{0.25pt}~2023~год
	\par
	\bigskip
	Проверил доц. к.т.н.\,:
	\par
	\medskip
	Съянов~С.\,Ю.\,
	\rule{5.5cm}{0.25pt}
	\par
	\medskip
	"<\rule{1.25cm}{0.25pt}\,">\rule{5cm}{0.25pt}~2023~год
  \end{minipage}
  \vfill
  \centerline{г.~Брянск~2023 год}
\end{titlepage}
\setcounter{page}{2}

\section*{Аннотация}

Темой курсовой работы является разработка математической модели трехзвенного робота--манипулятора.
В работе анализируются методы построения геометрических моделей манипуляционных систем, изложена теория векторной и матричной алегбры, дается обзор существующих конструкций промышленных роботов.
\par
В работе предлагается алгоритм описания геометрии манипуляционной системы, его математическая реализация и программная реализация на ЭВМ под управлением операционной системы GNU/Linux с использованием свободного ПО: языка научного программирования Octave, совместимого с MatLab, и системой комьютерной математики и символьных вычислений Maxima.
\par
Курсовая работа состоит из трех разделов.
В первом разделе дан аналитический обзор существующих конструкций промышленных роботов, а также описание используемого математического аппарата.
Во втором разделе дается рассчетная схема и описание рассматриваемого устройства.
В третьем разделе подробно оброзревается программная реализация созданной математической модели.

\newpage
\thispagestyle{empty}
\tableofcontents
\newpage

\section*{Введение}
\addcontentsline{toc}{section}{Введение}

Одним из важнейших разделов компьютерного моделирования мехатронных систем является разработка систем управления многозвенными роботами--манипуляторами.
Основное назначение робота--манипулятора состоит в перемещении рабочего органа в пространстве по заданной траектории~\cite{krahmalev:mod_rob}.
Поэтому среди систем, входящих в состав такого робота, исполнительная имеет особое значение.
\par
Манипуляционные роботы за счет гибкой конфигурируемости способны выполнять широкий круг всевозможных задач в условиях промышленного производства без необходимости закупки дорогостоящего специализированного оборудования, что ведет к экономии средств в перспективе~\cite{borisov:mod_rob}.
Это вызывает высокий спрос на подобные системы со стороны промышленности, что подтверждает актуальность проблемы.
\par
Целью курсовой работы является разработка методов построения и анализа математических моделей манипуляционных систем, связывающих обощенные координаты робота и декартовы координаты характерной точки на третьем звене ({\itshape TCP~--- Tool Center Point}).
\par
Для достижения поставленной цели необходимо решить следующие задачи.
Проанализировать методы решения прямой задачи кинематики для многозвенных робототехнических систем.
Выбрать метод, наиболее удовлетворяющий цели работы, и обосновать выбор конкретного метода.
Выбрать кинематическую схему манипуляционного робота и посредством избранного метода построить её математическую модель.
Проверить правильность модели графо--аналитическим способом.
Реализовать программную реализацию математической модели для ЭВМ под управлением ОС GNU/Linux.

\newpage

\section{Аналитический обзор}

\subsection{Анализ существующих конструкций}

Промышленный робот~--- это перепрограммируемый многофункциональный манипулятор, предназначенный для осуществления различных заранее заданных перемещений материалов, деталей, инструментов или специальных приспособлений с целью выполнения различных работ~\cite{fu:rob_tech}.
\par
Промышленный робот представляет собой универсальный, оснащенный компьютером манипулятор, состоящий из нескольких твердых звеньев, последовательно соединенных вращательными или поступательными сочленениями~\cite{fu:rob_tech}.
Эта цепь одним концом соединена с основанием манипулятора, другой ее конец свободен и снабжен инструментом, позволяющим воздействовать на объекты манипулирования или выполнять сборочные работы~\cite{fu:rob_tech}.
Движение в сочленениях манипулятора вызывает относительное перемещение его звеньев~\cite{fu:rob_tech}.
Он может воздействовать на объекты, расположенные внутри его рабочего объема~\cite{fu:rob_tech}.
\par
{\itshape Роботы с многозвенной рукой}.
Некоторые роботы фактически работают как человеческа рука~\cite{asfal:rob_auto}.
Такие роботы называют роботами с многозвенной рукой~\cite{asfal:rob_auto}.
Основание робота поворачивается наподобие человеческого торса.
Плечевой и локтевой суставы большинства таких роботов имеют по одной оси поворота, которые перпендикулярны руке и параллельны плоскости, на которой установлено основание~\cite{asfal:rob_auto}.
Запястье роботов с многозвенной рукой почти всегда может сгибаться, а поворот и вращение могут отсутствовать~\cite{asfal:rob_auto}.
У большинства роботов с многозвенной рукой угол поворота кисти больше, чем у человеческой руки, которая за счет локтевого и плечевого суставов способна совершать поворот на \(270^\circ\)~\cite{asfal:rob_auto}. 
\par
{\itshape Роботы, работающие в полярных координатах}.
Роботы, работающие в полярных координатах выглядят совершенно иначе, чем роботы с многозвенной рукой, но отличие фактически имеется только в третьей оси (3--ей степени подвижности)~\cite{asfal:rob_auto}.
Вместо локтевого сустава такой робот имеет гидравлический или пневматический цилиндр, который обеспечивает удлинение руки~\cite{asfal:rob_auto}.
Типичным  движением робота является перемещение детали по вертикали с сохранением ее ориентации~\cite{asfal:rob_auto}.
Для роботов с многозвенной рукой это представляет проблему, так как требует одновременных скоординированных движений плечевого и локтевого суставов~\cite{asfal:rob_auto}.
\par
{\itshape Роботы, работающие в цилиндрических координатах}.
Робот, работающий в цилиндрических координатах имеет вертикальное возвратно--поступательное движение для второй степени подвижности или подвижное основание~\cite{asfal:rob_auto}.
Обычно это выполняется с помощью пневматического или гидравлического цилиндра~\cite{asfal:rob_auto}.
Роботы такого типа обычно имеют возвратно--поступательное движение по третьей степени подвижности~\cite{asfal:rob_auto}.
Недостатком роботов, работающих в цилиндрических координатах, является невозможность огибать препятствия~\cite{asfal:rob_auto}.
\par
{\itshape Роботы, работаюшие в декартовой системе координат}.
Рабочим, имеющим дело со станками, удобнее использовать роботы работающие в декартовой системе координат~\cite{asfal:rob_auto}.
Первые три оси роботов, работающий в декартовой системе координат~--- это оси \(X,\;Y,\;Z\) металлорежущих станков~\cite{asfal:rob_auto}.
Преимуществом такого типа роботов является их жесткость, обеспечиваемая за счет коробчатой конструкции рамы портала~\cite{asfal:rob_auto}.
\par
Для построения математической модели выбрана схема B2--П--В1 (рис.~\ref{i:rgm_T2_S_T1}), где "<В2">~--- вращательная кинематическая пара с осью вращения, совпадающей с одним из звеньев; "<П">~--- поступательная кинематическая пара; "<В1">~--- вращательная кинематическая пара, ось вращения которой перпендикулярная плоскости звеньев.
Иначе кинематическую схему можно обозначить T2--S--T1, где "<T">~--- обозначение вращательной пары (от англ. {\itshape turning}), "<S">~--- поступательной (англ. {\itshape sliding}).
\par
Поскольку вместо локтевого сустава данный робот имеет поступательную кинематическую пару, то это робот, работающий в полярных координатах~\cite{asfal:rob_auto}.
Данный робот будет хорошо подходить для перемещения детали по вертикали с сохранением ее ориентации~\cite{asfal:rob_auto}.
Такая конфигурация может использоваться на складах с многоярусными стойками хранения или в {\itshape РТК}.
\begin{figure}[t]
  \centering
  \includegraphics[width=0.5\textwidth]{rgm_T2_S_T1}
  \caption{Кинематическая схема робота--манипулятора}
  \label{i:rgm_T2_S_T1}
\end{figure}

\subsection{Анализ математического аппарата}
\label{sec:an_mat_ap}

Кинематика манипулятора изучает геометрию движения манипулятора относительно заданной абсолютной системы координат, не рассматривая силы и моменты, порождающие это движение~\cite{fu:rob_tech}.
Таким образом, ее предметом является описание пространственного положения манипулятора как функции времени, и, в частности, соотношения между пространством присоединенных переменных манипулятора~--- обобщенными координатами, положением и ориентацией схвата~\cite{fu:rob_tech}.
\par
Прямая задача кинематики манипулятора формулируется следующим образом:
\par
Для конкретного манипулятора по известному вектору присоединенных углов~--- обощенных координат \(q(t) = (q_1(t),q_2(t), \cdots, q_n(t))^T\) и заданным геометрическим параметрам звеньев (\(n\)~--- число степеней свободы) определить положение и ориентацию схвата манипулятора относительно абсолютной системы координат~\cite{fu:rob_tech}.
\par
Обратная задача кинематики манипулятора звучит так:
\par
При известных геометрических параметрах звеньев найти все возможные векторы присоединенных переменных манипулятора, обеспечивающие заданные положение и ориентацию схвата относительно абсолютной системы координат~\cite{fu:rob_tech}.
\par
Для систематического и обощенного подхода к описанию и расположению звеньев манипулятора относительно заданной абсолютной системы координат используется матричная и векторная алгебра~\cite{fu:rob_tech, shahinpur:rob_tech}.
Так как звенья манипулятора могут совершать вращательное или поступательное движение относительно абсолютной системы отсчета, для каждого звена определяется связанная система координат, оси которой параллельны осям сочленений звеньев~\cite{fu:rob_tech}.
Так как манипуляционные системы представляют собой разомкнутую кинематическую цепь, состоящую из абсолютно твердых звеньев, соединенных между собой кинематическими парами пятого класса, имеющими одну степень свободы, то каждое звено такой манипуляционной системы, кроме последнего, входит в две кинематические пары~\cite{krahmalev:mod_rob}.
\par
Для описания вращательного движения связанной системы отсчета относительно абсолютной используется матрица поворота размерностью \(3 \times 3\), для представления векторов положения в пространстве применяются однородные координаты \( [x\:y\:z]^T\)~\cite{fu:rob_tech, shahinpur:rob_tech}.
\par
Матрицу поворота можно определить как матрицу преобразования трехмерного вектора положения в евклидовом пространстве, переводящую его координаты из связанной системы отсчета \(OUVW\) в асболютную систему координат \(OXYZ\)~\cite{fu:rob_tech}.
Пусть \((i_x,\:j_y,\:k_z)\) и \((i_u,\:j_v,\:k_w)\)~--- единичные векторы, направленные вдоль осей систем \(OXYZ\) и \(OUVW\) соответственно.
Предположим, что есть некоторая точка \(p\) фиксированная и неподвижная в системе отсчета \(OUVW\).
Тогда в системах координат \(OUVW\) и \(OXYZ\) точка \(p\) будет иметь соответственно координаты~\cite{fu:rob_tech}
\begin{equation}\label{f:p_uvw:c}
  p_{uvw} = (p_u,\:p_v,\:p_w)^T
  ,
\end{equation}
\begin{equation}\label{f:p_xyz:c}
  p_{xyz} = (p_x,\:p_y,\:p_z)^T
  .
\end{equation}
\par
Задача состоит в определении матрицы \(R\), которая преобразует координаты \(p_{uvw}\) в координаты вектора \(p\) в системе \(OXYZ\) после того, как система \(OUVW\) будет повернута, т. е.
\begin{equation}\label{f:p_xyz:ouvw:sh}
  p_{xyz} = R\times p_{uvw}
  .
\end{equation}
\par
Из определения компонент вектора имеем 
\begin{equation}\label{f:p_uvw:v}
  p_{uvw} = p_u \cdot i_u + p_v \cdot j_u + p_w \cdot k_w
  .
\end{equation}
\par
Таким образом, используя определение скалярного произведения и равенство \ref{f:p_uvw:v}, получаем 
\begin{equation}\label{f:p_xyz:ouvw}
  \begin{aligned}
  & p_x = i_x \cdot p =  i_x \cdot i_u \cdot p_u + i_x \cdot i_v \cdot p_v + i_x \cdot i_w \cdot p_w,\\
  & p_y = i_y \cdot p =  i_y \cdot i_u \cdot p_u + i_y \cdot i_v \cdot p_v + i_y \cdot i_w \cdot p_w,\\
  & p_z = i_z \cdot p =  i_z \cdot i_u \cdot p_u + i_z \cdot i_v \cdot p_v + i_z \cdot i_w \cdot p_w,
  \end{aligned}
\end{equation}
или в матричной форме
\begin{equation}\label{f:p_xyz:ouvw:m}
  \begin{bmatrix}
  p_x\\
  p_y\\
  p_z
  \end{bmatrix}
  =
  \begin{bmatrix}
  i_x \cdot i_u & i_x \cdot i_v & i_x \cdot i_w\\
  i_y \cdot i_u & i_y \cdot i_v & i_y \cdot i_w\\
  i_z \cdot i_u & i_z \cdot i_v & i_z \cdot i_w
  \end{bmatrix}
  \cdot
\begin{bmatrix}
  p_u\\
  p_v\\
  p_w
  \end{bmatrix}
  .
\end{equation}
\par
С учетом этого выражения матрица \(R\) в равенстве \ref{f:p_xyz:ouvw:sh} примет вид
\begin{equation}\label{f:r}
  R = 
  \begin{bmatrix}
  i_x \cdot i_u & i_x \cdot i_v & i_x \cdot i_w\\
  i_y \cdot i_u & i_y \cdot i_v & i_y \cdot i_w\\
  i_z \cdot i_u & i_z \cdot i_v & i_z \cdot i_w
  \end{bmatrix}
  .
\end{equation}
\par
Преобразование, определяемое формулой \ref{f:p_xyz:ouvw:sh} называется ортогональным преобразованием, а поскольку все векторы, входящие в скалярное произведение, единичные, его также называют ортонормальным преобразованием~\cite{fu:rob_tech}.
\par
Если положение системы \(OUVW\) в пространстве изменяется за счет поворота этой системы на угол \(\alpha\) вокруг оси \(OX\), то матрица \(R\) примет вид
\begin{equation}\label{f:r_xalpha}
  R_{x,\alpha} = 
  \begin{bmatrix}
  1 & 0 & 0\\
  0 & \cos{\alpha} & -\sin{\alpha}\\
  0 & \sin{\alpha} & \cos{\alpha}
  \end{bmatrix}
  .
\end{equation}
\par
Аналогично матрицы поворота вокруг оси \(OY\) на угол \(\varphi\) (см. формулу \ref{f:r_yphi}) и вокруг оси \(OZ\) на угол \(\theta\) (см. формулу \ref{f:r_ztheta}).
\begin{equation}\label{f:r_yphi}
  R_{y,\varphi} =
  \begin{bmatrix}
  \cos{\varphi} & 0 & \sin{\varphi}\\
  0 & 1 & 0\\
  -\sin{\varphi} & 0 & \cos{\varphi}
  \end{bmatrix}
\end{equation}
\begin{equation}\label{f:r_ztheta}
  R_{z,\theta} =
  \begin{bmatrix}
  \cos{\theta} & -\sin{\theta} & 0\\
  \sin{\theta} & \cos{\theta} & 0\\
  0 & 0 & 1
  \end{bmatrix}
\end{equation}
\par
Матрицы \(R_{x,\alpha}\), \(R_{y,\varphi}\) и \(R_{z,\theta}\) называются матрицами элементарных поворотов~\cite{fu:rob_tech}.
Любые другие матрицы конечных поворотов можно получить, используя матрицы элементарных поворотов~\cite{fu:rob_tech}.
Поскольку операция перемножения матриц некоммутативна, здесь существенна последовательность выполнения поворотов~\cite{fu:rob_tech}.
Результирующая матрица поворота может быть получена с помощью следующих правил~\cite{fu:rob_tech}\,:
\begin{enumerate}
  \item Вначале обе системы совпадают, и, следовательно, матрица поворота представляет собой единичную матрицу \(3 \times 3\)\,;
  \item Если подвижная система координат \(OUVW\) совершает поворот вокруг одной из основных осей системы \(OXYZ\), матрицу предыдущего результирующего поворота умножают слева на соответствующую матрицу элементарного поворота;
  \item Если подвижная система координат \(OUVW\) совершает поворот вокруг одной из своих основных осей, матрицу предыдущего результирующего поворота надо умножить справа на соответствующую матрицу элементарного поворота.
\end{enumerate}
\par
Поскольку трехмерная матрица поворота не несет информации о поступательном перемещении и масштабе, вектор координат \(p = (p_x,\:p_y,\:p_z)^T\) в трехмерном пространстве дополняют четвертой компонентой так, что она принимает вид \(\widehat{p} = (\omega p_x,\:\omega p_y,\:\omega p_z,\:\omega)^T\)~\cite{fu:rob_tech}.
В этом случае говорят, что вектор \(\widehat{p}\) выражен в однородных координатах~\cite{fu:rob_tech}.
Четвертую компоненту \(\omega\) можно рассматривать как масштабирующий множитель, принимающий значение \(\omega > 0\).
Если \(\omega = 1\), то однородные координаты вектора положения совпадают с его физическими координатами~\cite{fu:rob_tech}.
\par
{\itshape Однородная матрица преобразования} представляет собой матрицу размерностью \(4 \times 4\), которая преобразует вектор выраженный в однородных координатах, из одной системы отсчета в другую~\cite{fu:rob_tech}.
Однородная матрица преобразования может быть разбита на четрые подматрицы:
\begin{displaymath}
  T =
  \begin{bmatrix}
  R_{3 \times 3} & p_{3 \times 1}\\
  f_{1 \times 3} & 1 \times 1
  \end{bmatrix}
  =
  \begin{bmatrix}
  \text{\ttfamily Поворот} & \text{\ttfamily Сдвиг}\\
  \text{\ttfamily Преобразование перспективы} & \text{\ttfamily Масштабирование}
  \end{bmatrix}
\end{displaymath}
Таким образом, однородное представление для матриц \ref{f:r_xalpha} -- \ref{f:r_ztheta} имеет соответственно вид
\begin{equation}\label{f:t_xalpha}
  T_{x,\alpha} = 
  \begin{bmatrix}
  1 & 0 & 0 & 0\\
  0 & \cos{\alpha} & -\sin{\alpha} & 0\\
  0 & \sin{\alpha} & \cos{\alpha} & 0\\
  0 & 0 & 0 & 1
  \end{bmatrix}
  ,
\end{equation}
\begin{equation}\label{f:t_yphi}
  T_{y,\varphi} = 
  \begin{bmatrix}
  \cos{\varphi} & 0 & \sin{\varphi} & 0\\
  0 & 1 & 0 & 0\\
  -\sin{\varphi} & 0 & \cos{\varphi} & 0\\
  0 & 0 & 0 & 1
  \end{bmatrix}
  ,
\end{equation}
\begin{equation}\label{f:t_ztheta}
  T_{z,\theta} = 
  \begin{bmatrix}
  \cos{\theta} & -\sin{\theta} & 0 & 0\\
  \sin{\theta} & \cos{\theta} & 0 & 0\\
  0 & 0 & 1 & 0\\
  0 & 0 & 0 & 1
  \end{bmatrix}
  .
\end{equation}
\par
Однородная матрица композиции преобразований может быть получена путем перемножения этих матриц~\cite{fu:rob_tech}.
Однако, поскольку операция перемножения матриц некоммутативна, особое внимание следут обратить на порядок перемножения матриц.
При определении однородной матрицы композиции используются следующие правила~\cite{fu:rob_tech}\,:
\begin{enumerate}
  \item Вначале обе системы координат совпадают, и, следовательно, однородная матрица преобразования представляет собой единичную матрицу размерностью \(4 \times 4\);
  \item Если подвижная система координат \(OUVW\) совершает поворот\,/\,сдвиг относительно осей системы отсчета \(OXYZ\), однородную матрицу предыдущего результирующего преобразования надо умножить слева на соответствующую однородную матрицу элементарного поворота\,/\,сдвига;
  \item Если подвижная система координат \(OUVW\) совершает поворот\,/\,сдвиг относительно одной из собственных основных осей, однородную матрицу предыдущего результирующего преобразования надо умножить справа на соответствующую однородную матрицу элементарного поворота\,/\,сдвига.
\end{enumerate}
\par
Механический манипулятор состоит из звеньев, соединенных вращательными или поступательными сочленениями~\cite{fu:rob_tech}.
Каждая пара, состоящая из звена и сочленения, обеспечивает одну степень свободы~\cite{fu:rob_tech}.
Следовательно, манипулятор с \(N\) степенями свободы содержит \(N\) пар звено--шарнир, причем звено \(0\) соединено с основанием, где обычно размещается инерциальная система координат данной динамической системы, а последнее звено соединено с рабочим инструментом \cite{fu:rob_tech}.
Звенья и сочленения нумеруются по возрастанию от стойки к схвату манипулятора; так, сочленением \(1\) считается точка соединения звена \(1\) и опорной стойки~\cite{fu:rob_tech}.
Каждое звено соединено не более, чем с двумя другими, чтобы не образовывалось замкнутых цепей \cite{fu:rob_tech}.
\par
Для описания вращательных и поступательных связей между соседними звеньями Денавит и Хартенберг предложили матричный метод построения систем координат, связанных с каждым звеном кинематической цепи~\cite{fu:rob_tech}.
Смысл представления Денавита---Хартенберга (ДХ--представление) состоит в формировании однородной матрицы преобразования~\cite{fu:rob_tech}.
Это дает возможность последовательно преобразовать координаты схвата манипулятора из системы отсчета, связанной с последним звеном, в базовую систему отсчета, являющуюся инерциальной системой координат для рассматриваемой динамической системы~\cite{fu:rob_tech}.
\par
Кроме базовой системы координат для каждого звена на оси его сочленения определяется ортнормированная декартова система координат \((x_i,\,y_i,\,z_i)\), где \(i = 1, 2, \ldots, n\), а \(n\) равно числу степеней свободы манипулятора~\cite{fu:rob_tech}.
Поскольку вращательное или поступательное сочленение имеет только одну степень свободы, каждая система координат \((x_i,\,y_i,\,z_i)\) манипулятора соответствует \((i + 1)\)-у сочленению и связана с \(i\)-тым звеном~\cite{fu:rob_tech}.
Когда силовой привод возбуждает движение в \(i\)-м сочленении, \(i\)-е звено начинает двигаться относительно \((i - 1)\)-го звена~\cite{fu:rob_tech}.
Поскольку \(i\)-я система координат связана с \(i\)-м звеном, она движется вместе с ним~\cite{fu:rob_tech}.
Таким образом, \(n\)-я система координат движется вместе с последним \(n\)-м звеном манипулятора.
Базовой является нулевая система координат \((x_0,\,y_0,\,z_0)\), представляющая собой инерциальную систему координат манипулятора~\cite{fu:rob_tech}.
\par
Каждая система координат формируется на основе следующих трех правил~\cite{fu:rob_tech}:
\begin{enumerate}
  \item Ось \(z_{i-1}\) направлена вдоль оси \(i\)-го сочленения.
  \item Ось \(x_i\) перпендикулярна оси \(z_{i-1}\) и направлена от нее.
  \item Ось \(y_i\) дополняет оси \(x_i\), \(z_i\) до правой декартовой системы координат.
\end{enumerate}
\par
Эти правила оставляют свободу в выборе \(0\)-й системы координат при условии, что ось \(z_0\) направлена вдоль оси первого сочленения~\cite{fu:rob_tech}.
Последняя, \(n\)-я система координат также может быть выбрана в произвольной точке \(n\)-го звена при условии, что ось \(x_n\) перпендикулярна оси \(z_{n-1}\)~\cite{fu:rob_tech}.
\par
Алгоритм формирования систем координат звеньев выглядит следующим образом \cite{borisov:mod_rob}: \label{p:al_pr_kor}
\begin{enumerate}
  \item Выберем ось \(z_i\)	так, чтобы она совпадала с осью вращения или поступательного движения последующего \((i + 1)\)-го сочленения в зависимости от его типа.
  \item Выберем ось \(x_i\), \(i = 1, 2, \ldots, n - 1\) так, чтобы выполнялись два следующих условия.
  \begin{enumerate}
    \item Ось \(x_i\) перпендикулярна оси \(z_{i-1}\).
	\item Ось \(x_i\) пересекает ось \(z_{i - 1}\).
  \end{enumerate}
  Ось \(x_0\) можно выбрать произвольно, хотя желательно, чтобы в нулевой конфигурации смежные оси \(x_{i-1}\) и \(x_i\) были сонаправлены, поскольку именно они будут задавать значения обобщенных координат (вдоль осей \(z_i\)), которые в начальной конфигурации предполагаются нолевыми.
  В противном случае необходимо будет задать начальный поворот, чтобы нивелировать к нолю.
  \par
  Точка отсчета систем координат опередляется пересечением осей \(z_i\)  и \(x_i\).
  В случаях, когда \(x_i\) имеет множество вариантов расположения (например, если \(z_{i-1}\) и \(z_i\) параллельны), то, соответственно, и начало системы координат может располагаться в любой точке, принадлежащей оси \(z_i\).
  \item Выберем ось \(y_i\) так, чтобы система координат, заданные единичными векторами \(\vec{x}_i,\,\vec{y}_i,\,\vec{z}_i\) была правой, то есть в направлении, заданном векторным произведением
  \begin{displaymath}
    \vec{y}_i = \vec{z}_i \times \vec{x}_i
	.
  \end{displaymath}
  \item Заключительным шагом выберем систему координат \(n\), связанную со схватом или рабочим инструметов.
  Для большинства современных роботов последнее сочленение является вращательным, ввиду чего оси \(z_{n - 1}\) и \(z_n\) совпадают. В этом случае искомая система координат получается путем смещения предшествующей на фиксированное значение \(d_n\) вдоль оси \(z_{n - 1}\) и последующего поворота на переменный угол \(\theta_n\) вокруг оси \(z_{n-1}\) или наоборот.
\end{enumerate}
\par
Известно, что положение и ориентация твердого тела в пространстве однозначно определяется шестью координатами: тремя линейными и тремя угловыми~\cite{borisov:mod_rob}. \label{p:dh-param}
Использование ДХ--параметров \(\theta_i\), \(d_i\), \(\alpha_i\), \(a_i\) позволяет сократить это количество до четырех~\cite{borisov:mod_rob}.
Причем для вращательных сочленений параметры \(d_i\), \(\alpha_i\), \(a_i\) являются характеристиками сочленения, постоянными для данного типа робота~\cite{fu:rob_tech}.
В то же время, \(\theta_i\) является переменной величиной, изменяющейся при движении (вращении) \(i\)-го звена относительно \((i - 1)\)-го~\cite{fu:rob_tech}.
Для поступательных сочленений  \(\theta_i\), \(\alpha_i\), \(a_i\)~--- характеристики сочленений, неизменные для данного робота, а \(d_i\)~--- переменная величина~\cite{fu:rob_tech}.
\par
Определение параметров Денавита---Хартенберга~\cite{borisov:mod_rob}:
\begin{itemize}
  \item \(\theta_i\)~--- угол вокруг оси \(z_{i - 1}\) от \(x_{i - 1}\) до \(x_i\);
  \item \(d_i\)~--- расстояние вдоль оси \(z_{i - 1}\) от \(x_{i - 1}\) до \(x_i\);
  \item \(\alpha_i\)~--- угол вокруг оси \(x_i\) от \(z_{i - 1}\) до \(z_i\);
  \item \(a_i\)~--- расстояние вдоль оси \(x_i\) от \(z_{i - 1}\) до \(z_i\).
\end{itemize}
\par
Как только ДХ-системы координат сформированы для всех звеньев, не составляет труда построить однородные матрицы преобразования, связывающие \(i\)-ю и \((i-1)\)-ю системы координат, выполняя следующую последовательность операций~\cite{fu:rob_tech}:
\begin{enumerate}
  \item Поворот вокруг оси \(z_{i-1}\) на угол \(\theta_i\), чтобы ось \(x_{i-1}\) стала сонаправлена с осью \(x\).
  \item Сдвиг вдоль оси \(z_{i-1}\) на расстояние \(d_i\), чтобы совместить оси \(x_{i-1}\) и \(x\).
  \item Сдвиг вдоль оси \(x_i\) на расстояние \(a_i\), чтобы совместить начала координат.
  \item Поворот вокруг оси \(x_i\) на угол \(\alpha_i\), в результате достигается совпадание систем координат.
\end{enumerate}
\par
Каждую из этих четырех операций можно описать однородной матрицей поворота--сдвига, а произведение таких матриц даст однородную матрицу сложного преобразования \({}^{i-1}A_i\), называемую ДХ--матрицей преобразования для смежных систем координат с номерами \(i\) и \((i-1)\)~\cite{fu:rob_tech}.
Таким образом, получаем
\begin{equation}
\begin{aligned}
   {}^{i-1}A_i & = T_{z,d}\,T_{z,\theta}\,T_{x,a}\,T_{x,\alpha} = 
  \begin{bmatrix}
    1 & 0 & 0 & 0 \\
	0 & 1 & 0 & 0 \\
	0 & 0 & 1 & d_i \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  \begin{bmatrix}
    \cos{\theta_i} & -\sin{\theta_i} & 0 & 0 \\
	\sin{\theta_i} & \cos{\theta_i} & 0 & 0 \\
	0 & 0 & 1 & 0 \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  \times
  \\
  & \times
  \begin{bmatrix}
    1 & 0 & 0 & a_i \\
	0 & 1 & 0 & 0 \\
	0 & 0 & 1 & 0 \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  \begin{bmatrix}
    1 & 0 & 0 & 0 \\
	0 & \cos{\alpha_i} & -\sin{\alpha_i} & 0 \\
	0 & \sin{\alpha_i} & \cos{\alpha_i} & 0 \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  =
  \\
  & =
  \begin{bmatrix}
    \cos{\theta_i} & -\cos{\alpha_i}\cdot\sin{\theta_i} & \sin{\alpha_i}\cdot\sin{\theta_i} & a_i\cdot\cos{\theta_i} \\
	\sin{\theta_i} & \cos{\alpha_i}\cdot\cos{\theta_i} & -\sin{\alpha_i}\cdot\cos{\theta_i} & a_i\cdot\sin{\theta_i} \\
	0 & \sin{\alpha_i} & \cos{\alpha_i} & d_i \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  .
\end{aligned}
\label{f:dh-matrix}
\end{equation}
\par
Используя матрицу \({}^{i-1}A_i\), можно связать однородные координаты \(p_i\) точки \(p\) относительно \(i\)-й системы координат (точка \(p\) покоится в \(i\)-й системе координат) с однородными координатами этой точки относительно \((i-1)\)-й системы отсчета, связанной с \((i-1)\)-м звеном~\cite{fu:rob_tech}.
Эта связь устанавливается равенством
\begin{equation}
  p_{i-1} = {}^{i-1}A_i\,p_i
  ,
\end{equation}
где \(p_{i-1} = (x_{i-1}, y_{i-1}, z_{i-1}, 1)^T\) и \(p_i = (x_i, y_i, z_i)^T\).
\par
Однородная матрица \({}^0T_i\), определяющая положение \(i\)-й системы координат относительно базовой системы координат, представляет собой произведение последовательности однородных матриц преобразования \({}^{i-1}A_i\) и имеет вид~\cite{fu:rob_tech}
\begin{equation}
  {}^0T_i = {}^{0}A_1\,{}^{1}A_2\ldots{}^{i-1}A_i = \prod^i_{j = 1} {}^{j-1}A_j = 
  \begin{bmatrix}
    {}^0R_i & {}^0p_i \\
	0 & 1
  \end{bmatrix}
  .
  \label{f:matrix_of_robot}
\end{equation}
\par
Матрицу \({}^0T_i\) часто называют "<матрицей манипулятора">~\cite{fu:rob_tech}.
Представим матрицу \({}^0T_i\) в следующем виде~\cite{fu:rob_tech}
\begin{equation}
  {}^0T_i = 
  \begin{bmatrix}
    x_i & y_i & z_i & p_i \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  =
  \begin{bmatrix}
    n & s & a & p \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  =
  \begin{bmatrix}
    n_x & s_x & a_x & p_x \\
    n_y & s_y & a_y & p_y \\
    n_z & s_z & a_z & p_z \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  ,
\end{equation}
где
\par
\(n\)~--- вектор нормали к схвату~\cite{fu:rob_tech}. В случае плоскопараллельного движения пальцев схвата этот вектор перпендикулярен пальцам манипулятора~\cite{fu:rob_tech}.
\par
\(s\)~--- касательный вектор схвата~\cite{fu:rob_tech}. Он лежит в плоскости движения пальцев схвата и указывает направление движения пальцев во время открытия и закрытия схвата~\cite{fu:rob_tech}.
\par
\(a\)~--- вектор подхода схвата~\cite{fu:rob_tech}. Он направлен по нормали к ладони схвата (т.~е. перпендикулярен плоскости крепления инструмента в схвате).
\par
\(p\)~--- вектор положения схвата~\cite{fu:rob_tech}. Этот вектор направлен из начала базовой системы координат к началу системы координат схвата, которое, как правило, расположено в точке, являющейся геометрическим центром полностью сжатых пальцев~\cite{fu:rob_tech}.
\par
Решение прямой задачи кинематики является, таким образом, вопросом вычисления \(T = {}^0A_i\) с помощью последовательного перемножения \(i\)-го количества матриц \({}^{i-1}A_i\)~\cite{fu:rob_tech}.
Решение прямой задачи кинематики приводит к единственной матрице \(T\) при заданных \(q = (q_1, q_2,\ldots, q_i)^T\) и фиксированных системах координат, где \(q_i = \theta_i\) для вращательного соединения и \(q_i = d_i\) для поступательного сочленения~\cite{fu:rob_tech}.
Ограничения определяются только физическими пределами изменения \(\theta_i, d_i\) для каждого сочленения манипулятора~\cite{fu:rob_tech}.

\subsection{Обзор программного обеспечения}

GNU Octave~--- это язык программирования высокого уровня, предназначенный для научных вычислений и числовых выражений~\cite{site:octave}.
Он предоставляет удобный интерфейс командной строки для численного решения линейных и нелинейных задач, а также для выполнения других численных экспериментов с использованием языка, который в основном совместим с Matlab~\cite{site:octave}. Интерпритатор Octave может быть запущен как и в эмуляторе терминала, так и с использованием графического интерфейса пользователя~\cite{site:octave}.
\par
Octave имеет обширные инструменты для решения распространенных задач числовой линейной алгебры, поиска корней нелинейных уравнений, интегрирования обычных функций, управления полиномами и интегрирования обыкновенных дифференциальных и дифференциально--алгебраических уравнений.
Его легко расширять и настраивать с помощью определяемых пользователем функций, написанных на собственном языке Octave, или с помощью динамически загружаемых модулей, написанных на C++, C, Fortran или других языках~\cite{site:octave}.
\par
Octave~--- свободное программное обеспечение, распространяемое по лицензии GNU General Public License (GPL)~\cite{site:octave}. 
А, значит, GNU Octave предоставляет четыре основные свободы пользователя: свободу использовать программное обеспечение для любых целей, свободу модифицировать программное обеспечение в соответствии с потребностями, свободу делиться программным обеспечением с друзьями и соседями, а также свободу делиться внесенными изменениями.
\par
GNU Octave работает на ЭВМ под управлением GNU/Linux, macOS, BSD, Windows~\cite{site:octave}.
В ОС Debian GNU/Linux, в которой выполняется курсовая работа, GNU Octave можно установить в виде deb--пакета из штатного репозитория с помощью команды "<{\ttfamily \verb|#| apt install octave}">, в формате универсального пакета flatpak из репозитория приложений flathub, или путем компиляции программы из исходного кода.
\par
Maxima~--- это система для манипуляций с символьными и числовыми выражениями, включая дифференцирование, интегрирование, ряды Тейлора, преобразования Лапласа, обыкновенные дифференциальные уравнения, системы линейных уравнений, полиномы, множества, списки, векторы, матрицы и тензоры~\cite{site:maxima}.
Maxima дает численные результаты высокой точности, используя точные дроби, целые числа произвольной точности и числа с плавающей запятой переменной точности~\cite{site:maxima}.
Maxima может отображать функции и данные в двух и трех измерениях~\cite{site:maxima}.
\par
Maxima специализируется на символьных вычислениях, т.е. с ее помощью удобно получать результаты вычислений в общем виде~\cite{site:maxima}.
Maxima имеет простой синтаксис, подобный синтаксису ALGOL, удобный консольный интерпритатор, а также несколько графических интерфейсов, например, WxMaxima, GMaxima, Cantor, Texmacs~\cite{site:maxima}.
\par
Maxima распространяется под свободной лицензией GNU GPL v.2, и доступна для ЭВМ, работающих под ОС GNU/Linux, macOS, BSD, Windows~\cite{site:maxima}.
Для ОС Debian Maxima доступна из штатного репозитория в виде deb--пакета с помощью команды "<{\ttfamily \verb|#| apt install maxima}">.


\newpage

\section{Построение математической модели}

\subsection{Формирование систем координат звеньев}

Кинематическая схема исследуемого трехзвенного робота--манипулятора представлена на рисунке \ref{i:rgm_T2_S_T1} на странице \pageref{i:rgm_T2_S_T1}.
Согласно представлению Денавита---Хартенберга, описанному в разделе \ref{sec:an_mat_ap}, необходимо сформировать базовую систему отсчета, которая будет инерциальной для рассматриваемой динамической системы.
Кроме базовой системы координат для каждого звена на оси его сочленения определяется ортонормированная декартова система координат.
Таким образом, для рассматриваемого робота должны быть определены четыре системы координат, а именно \(X_0\,Y_0\,Z_0\), \(X_1\,Y_1\,Z_1\), \(X_2\,Y_2\,Z_2\), \(X_3\,Y_3\,Z_3\) (см. рис. \ref{i:rgm_T2_S_T1_DH-axis}), причем последняя связана с рабочим звеном манипулятора ({\itshape TCP~--- Tool Center Point}).
\begin{figure}[h]
  \centering
  \includegraphics[width=0.5\textwidth]{rgm_T2_S_T1_DH-axis}
  \caption{Ориентация СК робота--манипулятора}
  \label{i:rgm_T2_S_T1_DH-axis}
\end{figure}
\par
Условием формирования базовой системы координат является направленность оси \(Z_0\) вдоль оси первого сочленения.
Расположим ось \(X_0\) перпендикулярно ей и направим ее влево.
Ось \(Y_0\) направим так, чтобы получить правую систему координат.
\par
Ось \(Z_1\) должна совпадать с осью поступательного движения 2-го сочленения, которая направлена вдоль плоскости звеньв.
Ось \(X_1\) располагаем на пересечении осей \(Z_0\) и \(Z_1\) и перпендикулярно плоскости, которую они образуют.
Для удобства, направим ось \(X_1\) в одном направлении с осью \(X_0\).
Ось \(Y_0\) направим так, чтобы получить правую систему координат.
\par
Ось \(Z_2\) направляем вдоль оси вращательного движения 3-го сочленения.
Поскольку это вращательное сочленения первого типа, его ось вращательно движения, перпендикулярна плоскости звеньев.
Ось \(X_2\) расположим на пересечении осей \(Z_1\) и \(Z_2\) и перпендикулярно плоскости, которую они образуют.
Для удобства, чтобы ось \(Y_2\) была направлена в положительном направлении оси \(Z_0\) базовой системы координат, направим ось \(X_2\) вправо.
\par
Ось \(Z_3\) системы координат схвата формируется таким образом, чтобы она совпадала по направлению с осью предыдущего звена, то есть с осью \(Z_2\).
Как нам известно, ось \(X_3\) должна пересекать и быть перпендикулярной к оси \(Z_2\).
В таком случае, ось \(X_3\) может быть направлена только вдоль плоскости звеньев три и четыре.
Ось \(Y_3\) дополняет систему координат до правой тройки векторов.

\subsection{Определение ДХ--параметров}

Как было отмечено в разделе \ref{sec:an_mat_ap}, метод Денавита--Хартенберга позволяет сократить количество координат, однозначно определяющих тело (систему координат) в пространстве, с шести до четырех (см. табл.~\ref{t:dh-param}).

\begin{figure}[h]
  \centering
  \includegraphics[width=0.5\textwidth]{rgm_T2_S_T1_DH-param}
  \caption{ДХ--параметры робота--манипулятора}
  \label{i:rgm_T2_S_T1_DH-param}
\end{figure}
\par

\begin{table}[t]
\centering
\begin{tabular}{|r|c|c|c|c|}
  \hline Сочленение \(i\) & \(a_i\), см & \(\alpha_i\), рад & \(d_i\), см & \(\theta_i\), рад \\ \hline
  1 & 0 & 0 & \(L_1\) & \(\theta_1\) \\ \hline
  2 & 0 & \(\frac{\pi}{2}\) & \(L_2+ d_2\) & \(\pi\) \\ \hline
  3 & \(L_3\) & 0 & 0 & \(\theta_3 + \frac{\pi}{2}\) \\ \hline
\end{tabular}
\caption{ДХ--параметры робота--манипулятора}
\label{t:dh-param}
\end{table}

Поскольку первое и третье сочленения являются вращательными, то присоединенной переменной для них является \(\theta_i\), а величины \(\alpha_i, a_i, d_i\)~--- присоединенными параметрами, характеризующими неизменяемые характеристики звеньев.
Второе сочленение является поступательным, значит, \(d_i\)~--- для него присоединенная переменная, а \(\theta_i, \alpha_i, a_i\)~--- присоединенные параметры.
Таким образом, можно сделать вывод, что в строке один таблицы \ref{t:dh-param} фигурирует переменная \(\theta_1\), в строке два~--- \(d_2\), в строке три~--- \(\theta_3\). При добавлении этих параметров в таблицу необходимо учесть угол между осями и длину звеньев.
\par
Параметры \(a_1 = a_2 = 0\), поскольку \(Z_0 \cap Z_1\) и \(Z_1 \cap Z_2\).
Величина \(a_3 = L_3\), потому что \(X_3 \perp (Z_2 \| Z_3)\).
Параметр \(\alpha_1 = 0\), так как оси \(Z_0 \uparrow\uparrow Z_1\), \(\alpha_2 = \frac{\pi}{2}\), потому что \(Z_1 \perp Z_2\) и \(\alpha_3 = 0\) из-за того, что \(Z_2 \uparrow \uparrow Z_3\).
Присоединенный угол \(\theta_2 = \pi\), поскольку \(X_1 \uparrow \downarrow X_2\).
\par
Зададим для робота--манипулятора длины звеньев \(L_1, L_2, L_3\) и пределы изменения присоединенных переменных \(\theta_1, d_2, \theta_3\), и укажем их значения таблице~\ref{t:var-param}.

\begin{table}[h]
\centering
\begin{tabular}{|c|c|c|c|c|c|}
  \hline  \(L_1\), см & \(L_2\), см & \(L_3\), см & \(\theta_1\), рад & \(d_2\), см & \(\theta_3\), рад \\ \hline
  60 & 50 & 25 & --- & \(\pm 30\) & \(\pm \pi\) \\ \hline
\end{tabular}
\caption{Длины звеньев и пределы изменения ДХ--параметров}
\label{t:var-param}
\end{table}

\subsection{Формирование ДХ--матриц преобразования}

Формирование ДХ--матриц производится путем подстановки полученных ДХ--параметров (см. табл. \ref{t:dh-param}) в матрицу \ref{f:dh-matrix}, описанную в разделе \ref{sec:an_mat_ap} на странице \pageref{f:dh-matrix}.
\par
Поскольку имеется одна ДХ--матрица в параметрическом виде, а конкретные ДХ--матрицы получаются путем подстановки значений ДХ--параметров, имеет смысл автоматизировать данный процесс.
Преимущества такой автоматизации будут особенно видны, если количество матриц, которое необходимо получить, довольно велико.
\par
Один из вариантов автоматизации это использовать язык научного программирования GNU Octave.
Функция формирующая ДХ--матрицы представлена в приложении \ref{sc:matlab_func}.
Однако у GNU Octave есть один существенный недостаток, данное программное обеспечение специализируется на численных вычислениях.
Т.~е. получить матрицу в общем виде довольно сложно.
Для этого есть специальный пакет "<symbolic">, который можно установить посредством пакетного менеджера GNU Octave.
Более подробная информация о данном скрипте представлена в разделе \ref{s:prot_matlab} на странице \pageref{s:prot_matlab}.
\par
Лучше для этой задачи подойдет система компьютеной математики Maxima, которая специализируется на символьных вычислениях.
Напишем скрипт (см. приложение \ref{sc:maxima}), формирующий ДХ--матрицы в символьном виде, и представим результат:

\begin{displaymath}
  {}^0A_1 = 
  \begin{bmatrix}
    \cos{\theta_1} & -\sin{\theta_1} & 0 & 0 \\
	\sin{\theta_1} & \cos{\theta_1} & 0 & 0 \\
	0 & 0 & 1 & 60 \\
	0 & 0 & 0 & 1
  \end{bmatrix}
\end{displaymath}

\begin{displaymath}
  {}^1A_2 = 
  \begin{bmatrix}
    -1 & 0 & 0 & 0 \\
	0 & 0 & 1 & 0 \\
	0 & 1 & 0 & d_2+50 \\
	0 & 0 & 0 & 1
  \end{bmatrix}
\end{displaymath}

\begin{displaymath}
  {}^2A_3 = 
  \begin{bmatrix}
    -\sin{\theta_3} & -\cos{\theta_3} & 0 & 25 \cdot \sin{\theta_3} \\
	\cos{\theta_3} & -\sin{\theta_3} & 0 & 25 \cdot \cos{\theta_3} \\
	0 & 0 & 1 & 0 \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  .
\end{displaymath}
\par
Более подробная информация о данном скрипте представлена в разделе \ref{s:prot_maxima} на странице \pageref{s:prot_maxima}.

\subsection{Формирование матрицы манипулятора}

Согласно математическому аппарату, рассмотреному в разделе \ref{sec:an_mat_ap}, итоговая "<матрица манипулятора"> формируется посредством перемножения ДХ--матриц соответствующих звеньев (см. уравнение \ref{f:matrix_of_robot} на с. \pageref{f:matrix_of_robot}).
\par
Данная задача представляет собой трудоемкий процесс даже для роботов--манипуляторов с тремя степенями подвижности, не говоря об более сложных кинематических системах.
\par
Один из вариантов автоматизации это использовать язык научного программирования GNU Octave.
Скрипт формирующий "<матрицу манипулятора"> представлен в приложении \ref{sc:matlab_rgm}.
Этот скрипт находит матрицу манипулятора только в численном виде.
Более подробная информация о данном скрипте представлена в разделе \ref{s:prot_matlab} на странице \pageref{s:prot_matlab}.
\par
Лучше для этой задачи подойдет система компьютеной математики Maxima, которая специализируется на символьных вычислениях.
Напишем скрипт (см. приложение \ref{sc:maxima}), формирующий "<матрицу манипулятора"> в символьном виде, и представим результат:

\begin{equation}
  {}^0A_3 = T = 
  \begin{bmatrix}
    \cos{\theta_1}\sin{\theta_3} & \cos{\theta_1}\cos{\theta_3} & -\sin{\theta_1} & 25\cos{\theta_1}\sin{\theta_3} \\
	\sin{\theta_1}\sin{\theta_3} & \sin{\theta_1}\cos{\theta_3} & \cos{\theta_1} & 25\sin{\theta_1}\sin{\theta_3} \\
    \cos{\theta_3} & -\sin{\theta_3} & 0 & 25\cos{\theta_3}+d_2+110 \\
	0 & 0 & 0 & 1
  \end{bmatrix}
  .
\label{f:t2st1matrix}
\end{equation}
\par
Более подробная информация о данном скрипте представлена в разделе \ref{s:prot_maxima} на странице \pageref{s:prot_maxima}.
\par
Матрица \ref{f:t2st1matrix}~--- это матрица манипулятора В2--П--В1.
Как видим, ориентация и положение вектора схвата манипулятора зависят от присоединенных переменных \(\theta_1, d_2, \theta_3\), которые соответствуют обобщенным координатам вращательных и поступательного звеньев.

\subsection{Проверка модели графо--аналитическим методом}

Используя кинематическую схему робота--манипулятора, представленную на рисунке \ref{i:rgm_T2_S_T1_DH-param} на странице \pageref{i:rgm_T2_S_T1_DH-param}, построим схему положения схвата робота для первого положения (рис. \ref{i:rgm_T2_S_T1_DH-checkup1}).

\begin{figure}[h]
  \centering
  \includegraphics[width=0.5\textwidth]{rgm_T2_S_T1_DH-checkup1}
  \caption{Вектор положения схвата для первого положения робота}
  \label{i:rgm_T2_S_T1_DH-checkup1}
\end{figure}
\par

Пусть первое положение будет \(\theta_1 = 0\)~(рад), \(d_2 = 0\)~(см), \(\theta_3 = 0\)~(рад).
Звенья робота при такой конфигурации выстраиваются вдоль оси \(Z_0\) базовой системы координат.
Вычислим координаты вектора положения схвата \({}^{(1)} \vec p\) следующим образом
\begin{displaymath}
\begin{aligned}
  {}^{(1)}p_x&=0,\\
  {}^{(1)}p_y&=0,\\
  {}^{(1)}p_z&=60+50+25=135.
\end{aligned}
\end{displaymath}
\par
Таким образом, вектор--столбец \({}^{(1)} \vec p=(0,\:0,\:135)^T\).
\par
Воспользовавшись матрицей манипулятора \ref{f:t2st1matrix} и подставив в нее значения обобщенных координат для первого положения, получим положение TCP и ориентацию ее СК:
\begin{displaymath}
{}^{(1)}T=
\begin{bmatrix}
  0 & 1 & 0 & 0 \\
  0 & 0 & 1 & 0 \\
  1 & 0 & 0 & 135 \\
  0 & 0 & 0 & 1
\end{bmatrix}
.
\end{displaymath}
\par
Исходя из теории описанной в разделе \ref{sec:an_mat_ap}, четвертый столбец матрицы является вектор-стоблом положения схвата робота--манипулятора \({}^{(1)} \vec p\), и он имеет значение \((0,\:0,\:135)^T\).
Что совпадает со значением вектора полученным графо--аналитическим методом.
\par
Проведем проверку еще для двух положений.
\par
Пусть значения обобщенных координат для второго положения будут \(\theta_1 = -\frac{\pi}{4}\)~(рад), \(d_2 = -20\)~(см), \(\theta_3 = \frac{\pi}{2}\)~(рад).
\par
Схема положения схвата робота--манипулятора для второго положения представлена на рисунке \ref{i:rgm_T2_S_T1_DH-checkup2}.
\begin{figure}[h]
  \centering
  \includegraphics[width=0.38\textwidth]{rgm_T2_S_T1_DH-checkup2}
  \caption{Вектор положения схвата для второго положения робота}
  \label{i:rgm_T2_S_T1_DH-checkup2}
\end{figure}
\par
Исходя из схемы определяем значение вектора схвата манипулятора \({}^{(2)} \vec p\).
\begin{displaymath}
\begin{aligned}
  {}^{(2)}p_x&=25 \cdot \cos{\frac{\pi}{4}}= \frac{25}{\sqrt{2}},\\
  {}^{(2)}p_y&=25 \cdot \sin{\frac{\pi}{4}}= \frac{25}{\sqrt{2}},\\
  {}^{(2)}p_z&=60+50-20=90.
\end{aligned}
\end{displaymath}
\par
Подставляем значения обощенных координат в матрицу манипулятора и получаем:
\begin{displaymath}
{}^{(2)}T=
\begin{bmatrix}
  \frac{1}{\sqrt{2}} & 0 & \frac{1}{\sqrt{2}} & \frac{25}{\sqrt{2}} \\
  -\frac{1}{\sqrt{2}} & 0 & \frac{1}{\sqrt{2}} & \frac{25}{\sqrt{2}} \\
  0 & -1 & 0 & 90 \\
  0 & 0 & 0 & 1
\end{bmatrix}
.
\end{displaymath}
\par
Математическая модель робота--манипулятора дала результат \({}^{(2)} \vec p=(\frac{25}{\sqrt{2}},\:\frac{25}{\sqrt{2}},\:90)^T\), то есть такой же какой получен графо--аналитическим методом.
\par
Пусть значения обобщенных координат для третьего положения будут \(\theta_1 = \frac{\pi}{2}\)~(рад), \(d_2 = 27\)~(см), \(\theta_3 = -\frac{\pi}{2}\)~(рад).
\par
Схема положения схвата робота--манипулятора для третьего положения представлена на рисунке \ref{i:rgm_T2_S_T1_DH-checkup3}.
\begin{figure}[h]
  \centering
  \includegraphics[width=0.45\textwidth]{rgm_T2_S_T1_DH-checkup3}
  \caption{Вектор положения схвата для второго положения робота}
  \label{i:rgm_T2_S_T1_DH-checkup3}
\end{figure}
\par
Исходя из схемы определяем значение вектора схвата манипулятора \({}^{(3)} \vec p\).
\begin{displaymath}
\begin{aligned}
  {}^{(3)}p_x&=0,\\
  {}^{(3)}p_y&=-25,\\
  {}^{(3)}p_z&=60+50+27=137.
\end{aligned}
\end{displaymath}
\par
Подставляем значения обощенных координат в матрицу манипулятора и получаем:
\begin{displaymath}
{}^{(3)}T=
\begin{bmatrix}
  0 & 0 & -1 & 0 \\
  -1 & 0 & 0 & -25 \\
  0 & 1 & 0 & 137 \\
  0 & 0 & 0 & 1
\end{bmatrix}
.
\end{displaymath}
\par
Математическая модель робота--манипулятора дала результат \({}^{(3)} \vec p=(0,\:-25,\:137)^T\).
\par
Все проверки графо-аналитическим методом сошлись, следовательно, математическая модель робота--манипулятора составлена верно.

\newpage

\section{Разработка ПО}

\subsection{Прототипирование ПО посредством SPL Octave}
\label{s:prot_matlab}

Согласно представлению Денавита--Хартенберга, описанному в разделе \ref{sec:an_mat_ap}, можно сделать вывод о том, что задача программы состоит в составлении матриц однородного преобразования координат (ДХ--матриц) и затем их перемножение с целью получения матрицы манипулятора.
\par
Таким образом, удобно создать отдельную функцию, формирующую ДХ-матрицы, на основе ДХ--параметров, передаваемых ей через аргументы. Язык Octave поддерживает создание таких функций.
Для этого необходимо создать отдельный файл с ключевым словом {\ttfamily function}.
\par
Согласно уравнению \ref{f:dh-matrix}, описанному на странице \pageref{f:dh-matrix}, функция должна принимать четыре ДХ--параметра \(\theta, d, \alpha, a \).
Подытожив все вышесказанное, имеем следующую функцию, написанную на языке Octave.

{\small \begin{listing}{22}
function DHmatrix = createDHmatrix(theta, d, alpha, a)
DHmatrix = [
  cos(theta), -cos(alpha) *sin(theta), sin(alpha) *sin(theta), a *cos(theta) ;
  sin(theta), cos(alpha) *cos(theta), -sin(alpha) *cos(theta), a *sin(theta) ;
  0,          sin(alpha),             cos(alpha),              d             ;
  0,          0,                      0,                       1
];
endfunction
\end{listing}
}
\par
В другом файле, в котором будет размещена основная часть программы, определим структуры для присоединенных параметров.
Структуры будут содержать неизменяемые характеристики для каждого звена.

{\small \begin{listing}{24}
pairLenght = struct('L1', 60, 'L2', 50, 'L3', 25);
aDHPar = struct('P1', 0, 'P2', 0, 'P3', pairLenght.L3);
alphaDHPar = struct('P1', 0, 'P2', pi/2, 'P3', 0);
\end{listing} 
}
\par

Создадим переменные для присоединенных ДХ--параметром, которые также будут использоваться в структурах для удобного доступа к ним.

{\small \begin{listing}{27}
theta1 = 0;
d2 = 0;
theta3 = 0;
dDHPar = struct('P1', pairLenght.L1, 'P2', pairLenght.L2 + d2, 'P3', 0);
thetaDHPar = struct('P1', theta1, 'P2', pi, 'P3', theta3 + pi/2);
\end{listing} 
}
\par

Вызовем функцию, которую мы описали в файле "<{\ttfamily createDHmatix.m}">, чтобы сформировать ДХ--матрицы манипулятора.

{\small \begin{listing}{32}
A01 = createDHmatrix(thetaDHPar.P1, dDHPar.P1, alphaDHPar.P1, aDHPar.P1);
A12 = createDHmatrix(thetaDHPar.P2, dDHPar.P2, alphaDHPar.P2, aDHPar.P2);
A23 = createDHmatrix(thetaDHPar.P3, dDHPar.P3, alphaDHPar.P3, aDHPar.P3);
\end{listing} 
}
\par
Перемножение матриц в Octave обозначается оператором "<{\verb|*|">.

{\small \begin{listing}{35}
A03 = A01 * A12 * A23;
\end{listing} 
}
\par

Запустив вышеприведенный скрипт GNU Octave даст следующий вывод.

\begin{minipage}{1\textwidth}
{\small
\begin{verbatim}
---------------
     RGM
theta1 =
0
d2 =
0
theta3 =
0
A03 =
    -0.0000     1.0000     0.0000    -0.0000
    -0.0000    -0.0000     1.0000    -0.0000
     1.0000     0.0000     0.0000   135.0000
          0          0          0     1.0000
----------------
\end{verbatim} 
}
\end{minipage}
\par

Однако GNU Octave имеет один существенный недостаток для данной задачи~--- в GNU Octave нет символьных вычислений, решение можно получить только в численном виде.
GNU Octave имеет прекрасный набор расширений.
Так, имеется пакет "<{\ttfamily symbolic}">, который добавляется в Octave символьные вычисления.
Однако использование этого пакета несколько затруднительно ввиду двольно сложного API.
Для получения результата в символьном виде лучше воспользоваться специализированным ПО для символьных вычислений.
Например, CAS Maxima.

\subsection{Прототипирование ПО посредством CAS Maxima}
\label{s:prot_maxima}

В Maxima можно использовать любой символ вне зависимости от того, присвоено ли ему какое-то выражение.
По умолчанию символ, связанный с любым выражением, будет представлять это выражение; символ, не связанный ни с чем, будет представлять самого себя, трактуемого опять-таки как выражение.
\par
Таким образом, чтобы объявить переменную в Maxima, необходимо просто ее обозначить.
Чтобы присвоить переменной какое-либо значение, необходимо воспользоваться оператором "<{\ttfamily :}">.
Все константы и зарезервированные выражения начинаются с символа "<{\ttfamily \verb|%|}">.
\par
Согласно представлению Денавита--Хартенберга, описанному в разделе \ref{sec:an_mat_ap}, параметры манипулятора классифицируются на присоединенные значения и присоединенные переменные.
В таком случае, удобно обозначить присоединенные значения как параметры, связанные с числовыми значениями, и присоединенные переменные как параметры, не связянные ни с чем.
Благодаря этому можно получить матрицу манипулятора в общем виде, а численные значения матрицы получать с помощью связывания присоединенных переменных с числовыми значениями.
\par
Определяем присоединенные параметры робота--манипулятора.

{\small
\begin{listing}{24}
l1:60;
l2:50;
l3:25;
a1:0;
a2:0;
a3:l3;
alpha1:0;
alpha2:(%pi/2);
alpha3:0;
d1:l1;
d3:0;
theta2:%pi;
\end{listing}
}
\par
Определяем присоединенные переменные робота--манипулятора.

{\small
\begin{listing}{37}
theta1:theta1;
d2:(l2+d2);
theta3:((%pi/2)+theta3);
\end{listing}
}
\par
Матрицы в CAS Maxima формируются с помощью оператора "<{\ttfamily matrix}">, где столбцы матрицы записываются внутри квадратных скобок, а значения разделяются с помощью символа запятой.

{\small
\begin{listing}{41}
A01:matrix(
[cos(theta1), -cos(alpha1)*sin(theta1),
sin(alpha1)*sin(theta1), a1*cos(theta1)],
[sin(theta1), cos(alpha1)*cos(theta1),
-sin(alpha1)*cos(theta1), a1*sin(theta1)],
[0, sin(alpha1), cos(alpha1), d1],
[0, 0, 0, 1]
);
A12:matrix(
[cos(theta2), -cos(alpha2)*sin(theta2),
sin(alpha2)*sin(theta2), a2*cos(theta2)],
[sin(theta2), cos(alpha2)*cos(theta2),
-sin(alpha2)*cos(theta2), a2*sin(theta2)],
[0, sin(alpha2), cos(alpha2), d2],
[0, 0, 0, 1]
);
A23:matrix(
[cos(theta3), -cos(alpha3)*sin(theta3),
sin(alpha3)*sin(theta3), a3*cos(theta3)],
[sin(theta3), cos(alpha3)*cos(theta3),
-sin(alpha3)*cos(theta3), a3*sin(theta3)],
[0, sin(alpha3), cos(alpha3), d3],
[0, 0, 0, 1]
);
\end{listing}
}
\par
Перемножение матриц обозначается оператором точка.

{\small
\begin{listing}{66}
T:(A01 . A12 . A23);
\end{listing}
}
\par
Maxima выводит результат в символьном виде, чтобы получить численное решение, необходимо воспользоваться оператором "<{\ttfamily ev}">, который может быть записан также как два апострофа "<{\ttfamily \verb|''|}">.

{\small
\begin{verbatim}
theta1:0$ d2:0$ theta3:0$ ''T;
\end{verbatim}
}
\par
Каждое выражение в Maxima должно оканчиваться символом "<{\ttfamily \verb|;|}"> или "<{\ttfamily \verb|$|}">.
При использовании первого варианта Maxima произведет диагностический вывод в консоль, при использовании второго~--- выполнит выражение бесшумно.
\par
Выполнив вышеприпеденный скрипт Maxima выдаст соответствующий вывод.
\par

\begin{minipage}{1\textwidth}
{\small
\begin{verbatim}
(%i1) theta1:0$d2:0$theta3:0$''T;
                               [ 0  1  0   0  ]
                               [              ]
                               [ 0  0  1   0  ]
(%o4)                          [              ]
                               [ 1  0  0  135 ]
                               [              ]
                               [ 0  0  0   1  ]
(%i5) 
\end{verbatim}
}
\end{minipage}

\newpage

\section*{Заключение}
\addcontentsline{toc}{section}{Заключение}

В ходе работы была выбрана кинематическая схема манипуляционного робота, и посредством метода Денавита--Хартенберга, построена ее математическая модель, а также программная реализация этой модели для ЭВМ под управлением ОС GNU/Linux с использованием свободного ПО.
\par
Для достижения работы, был рассмотреные существующие конструкции роботов--манипуляторов, проанализирован понятийный и математический аппарат метода Денавита--Хартенберга для описания разомкнутых кинематических цепей, изучено существующее ПО, обеспечивающее удобную реализацию компьютерной математики.
\par
Таким образом, разработано программное обеспечение, связывающее обобщенные координаты робота и декартовы координаты характерной точки на схвате манипулятора, что соответствует цели работы.
\par
Исходные тексты данного программного обеспечения и пояснительной записки расположены в личном репозитории студента по адресу {\ttfamily https://github.com/UlyssesApokin/RobotGeometricModel} .



\newpage

\addcontentsline{toc}{section}{Список литературы}
\begin{thebibliography}{00}

  \bibitem{krahmalev:mod_rob} Крахмалев, О. Н.
  \emph{Моделирование мапипуляционных систем роботов.}
  / О.\,Н.~Крахмалев.
  ~--- Саратов\,: Ай Пи Эр Медиа, 2018.~--- 165\,с.~--- Текст: непосредственный.

  \bibitem{borisov:mod_rob} Борисов, О. И.
  \emph{Методы управления робототехническими приложениями.}
  / О.\,И.~Борисов, В.\,С.~Громов, А.\,А.~Пыркин.
  ~--- СПб\,: изд-во ИТМО, 2016.~--- 108\,с.~--- Текст: непосредственый.

  \bibitem{fu:rob_tech} Фу, К.
  \emph{Робототехника.}
  / К.~Фу, Р.~Гонсалес, К.~Ли.
  ~--- пер. с анг.~--- М.\,: Мир, 1989.~--- 624\,c.,~ил.~--- Текст: непосредственный.
  
  \bibitem{shahinpur:rob_tech} Шахинпур, М.
  \emph{Курс робототехники.}
  / М. Шахинпур.
  ~--- пер. с анг.~--- М.\,: Мир, 1990.~--- 527\,с.,~ил.~--- Текст: непосредственный.

  \bibitem{asfal:rob_auto} Асфаль, Р.
  \emph{Роботы и автоматизация производства.}
  / Р. Асфаль.
  ~--- пер. с англ.~--- М.\,: Машиностроение, 1989.~--- 448\,c.,~ил.~--- Текст: непосредственный.

  \bibitem{site:maxima}
  \emph{Maxima-CAS.}
  / URL: {\ttfamily https://maxima.sourceforge.io/}
  (дата обращения: 17.10.2023).~--- Текст: электронный.

  \bibitem{site:octave}
  \emph{GNU Octave}
  / URL: {\ttfamily https://octave.org/}
  (дата обращения 15.10.2023).~--- Текст: электронный.

\end{thebibliography}
\newpage

\appendix

\section{ЯП "<Octave">: функция "<createDHmatrix">}
\label{sc:matlab_func}
{\small
\listinginput{1}{createDHmatrix.m}
}
\newpage

\section{ЯП "<Octave">: скрипт "<rgm.m">}
\label{sc:matlab_rgm}
{\small
\listinginput{1}{rgm.m}
}
\newpage

\section{ЯП "<Maxima">: скрипт "<rgm.maxima">}
\label{sc:maxima}
{\small
\listinginput{1}{rgm.maxima}
}

% конец документа
\end{document}
